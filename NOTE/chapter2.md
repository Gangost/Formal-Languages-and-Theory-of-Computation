# _Chapter 2 Context-Free Languages_
- [_Chapter 2 Context-Free Languages_](#_chapter-2-context-free-languages_)
  - [2.1 Context-Free Grammars (CFGs)](#21-context-free-grammars-cfgs)
    - [Definition](#definition)
    - [Ambiguity](#ambiguity)
    - [Chomsky Normal Form](#chomsky-normal-form)
  - [2.2 Pushdown Automata (PDAs)](#22-pushdown-automata-pdas)
    - [Equivalence with CFGs](#equivalence-with-cfgs)
    - [PDAs 轉 CFGs](#pdas-轉-cfgs)
  - [2.3 Non-Context-Free Languages](#23-non-context-free-languages)
    - [Pumping Lemma for CFLs](#pumping-lemma-for-cfls)

## 2.1 Context-Free Grammars (CFGs)

### Definition
```
A context-free grammar is a 4-tuple (V, Σ, R, S), where
1. V is a finite set called the variables,
2. Σ is a finite set, disjoint from V , called the terminals,
3. R is a finite set of rules, with each rule being a variable and a
string of variables and terminals, and 
4. S ∈ V is the start variable.
```
If u, v, and w are strings of variables and terminals, and A → w is a rule of the grammar, we say that `uAv yields uwv`, written `uAv ⇒ uwv`. <br/>
Say that `u derives v`, written `u ⇒∗ v`, <br/>
if u = v or if a sequence u1,u2,...,uk exists for k ≥ 0 and
u⇒u1 ⇒u2 ⇒...⇒uk ⇒v.

**Example:**
```
consider grammar G3 = ({S}, {a,b}, R, S). The set of rules, R, is
S →aSb|SS|ε.
This grammar generates strings such as abab, aaabbb, and aababb
```

### Ambiguity

**Ambiguous:** A string w is derived ambiguously in context-free grammar G if it has two or more different leftmost derivations. Grammar G is ambiguous if it generates some string ambiguously.

**Inherently ambiguous:** The context-free languages that can be generated only by ambiguous grammars are called inherently ambiguous.

**example:**

![](https://3.bp.blogspot.com/-iF2N3bfxoBA/VUBnQljjhII/AAAAAAAApds/RhDIFzQHC88/s1600/擷取3.PNG)

### Chomsky Normal Form

```
A → BC 
A → a
we permit the rule S → ε, where S is the start variable.
```

- Any context-free language is generated by a context-free grammar in Chomsky normal form.
    >Proof:
    1. Add a new start variable;
  1. Eliminate all ε rules (A → ε);
  2. Handle all unit rules (A → B);
  3. Convert all rules into the proper form.

**Example:**
![](https://2.bp.blogspot.com/-wxJfpOpZCBY/VUBt0HVZI0I/AAAAAAAApeE/sD9wlQ71dOI/s1600/ch1.PNG)
![](https://1.bp.blogspot.com/-Z4AvkXZE_BU/VUBt0K5k84I/AAAAAAAApeA/tNn-_p2MODc/s1600/ch2.PNG)
![](https://2.bp.blogspot.com/-Ki7eXRy5kzE/VUBt0E2UcYI/AAAAAAAApd8/E_Xwsc-AuW0/s1600/ch3.PNG)

## 2.2 Pushdown Automata (PDAs)

A pushdown automaton is a 6-tuple (Q, Σ, Γ, δ, q0, F ), where Q, Σ, Γ, and F are all finite sets, and
1. Q is the set of states;
2. Σ is the input alphabet;
3. Γ is the stack alphabet;
4. δ : Q×Σε ×Γε → P(Q×Γε) is the transition
function;
1. q0 ∈ Q is the start state;
2. F ⊆ Q is the set of accept states.

- a,b→c 代表的意思是 : [新吃進來的符號] , [堆疊最上的符號] → [放進堆疊的符號]
- $：當作堆疊是否為空的判斷
  
![](https://1.bp.blogspot.com/-e2X1dJ_1fw4/VUCFxZbCkLI/AAAAAAAApew/1vmogY_lajo/s1600/pda1.PNG)
![](https://3.bp.blogspot.com/-Lq-chx4noxI/VUCI5-hAH6I/AAAAAAAApfA/u_fMujNn7O4/s1600/pda2.PNG)

### Equivalence with CFGs

A language is context free if and only if some pushdown automaton recognizes it.

**Proof:**
![](https://4.bp.blogspot.com/-tqY7VAYncCM/VUCSiyRCedI/AAAAAAAApfQ/bpkN0guiCnU/s1600/pda3.PNG)

### PDAs 轉 CFGs

1. V ={Apq |p,q∈Q}
   > V ={Apq |p,q∈Q}
2. S = Aq0,qaccept
3. R contains the following three sets of rules:
  - For each p,q,r,s ∈ Q, t ∈ Γ, and a,b ∈ Σε, if
    (r,t) ∈ δ(p,a,ε) and (q,ε) ∈ δ(s,b,t), the rule

    A<sub>pq</sub> → aA<sub>rs</sub>b
  -  For each p,q,r ∈ Q, the rule

      A<sub>pq</sub> → A<sub>pr</sub>A<sub>rq</sub>
  - Foreachp∈Q,theruleApp →ε

![](https://2.bp.blogspot.com/-oCnd3BdUFcM/VUCXb-imhHI/AAAAAAAApfk/EJa4WEFhGOk/s1600/pda4.PNG)
![](https://3.bp.blogspot.com/-ir0jHeQtRQY/VUCXb1yDNYI/AAAAAAAApfg/36qRDaSUp2E/s1600/pda5.PNG)

## 2.3 Non-Context-Free Languages

### Pumping Lemma for CFLs

If A is a context-free language, then there is a number p (the pumping length) where, if s is any string in A of length at least p, then s may be divided into five pieces, s = uvxyz satisfying the conditions
1. for each i ≥ 0,uv<sup>i</sup>xyi<sup>i</sup>z ∈ A; 
2. |vy| > 0;
3. |vxy| ≤ p.

![](https://4.bp.blogspot.com/-830sgsawHjA/VUEcoQVn5XI/AAAAAAAApg0/-pATYkZzrhU/s1600/1.PNG)

![](https://1.bp.blogspot.com/-1PDlBdpweps/VUEcoWlHijI/AAAAAAAApg4/4p4IoyeEvTg/s1600/2.PNG)

How to use the pumping lemma for CFLs:
1. Assume the language, say, B, is context free in order to obtain a contradiction.
2. By the pumping lemma for CFLs, a pumping length p exists, and any string w ∈ B can be pumped if |w| ≥ p.
3. Find a string s ∈ B, |s| ≥ p, that s cannot be pumped as described in the pumping lemma.
4. The contradiction is obtained, and therefore, B is proved to be non-context-free.